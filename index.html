<script type="text/javascript" src="https://unpkg.com/lodash/lodash.min.js"></script>
<script type="text/javascript" src="https://unpkg.com/testml-compiler/lib/testml/compiler/browser.js"></script>


<textarea id="input"></textarea>
<input id="update" type="button" value="Update" onclick="compileTestML()" />
<textarea id="output"></textarea>


<script>
document.getElementById('input').value = `\
# A simple testml file

# For test frameworks that support planning:
Plan = 3


# Assertion loops:
*input.get-sha1 == *sha1
*input.get-md5 == *md5


# Test data blocks:
=== Test 1
--- input: I like pie.
--- sha1: 5f30adb9864439315a33e1a6631358164f94cc20

=== Test 2
--- input
I like pie.
--- sha1: 53b3de1f1d480989d391f24a8886d291773347a7
--- md5: 29a529ed285c7f5cd6c3bff4b3bb7626
`

function compileTestML() {
  var input = document.getElementById('input').value
  var output

  try {
    output = (new TestML.Compiler).compile(input)
  }
  catch(e) {
    output = String(e)
  }

  document.getElementById('output').value = output
}

compileTestML()
</script>


<style>
textarea {
  font-family: monospace;
  width: 500px;
  height: 500px;
}
#update {
    background-color: yellow;
}
</style>
