#!/usr/bin/env coffee

module.paths.unshift "#{require('path').dirname(__dirname)}/lib"

require 'testml/prelude'
require 'testml/compiler'

[input_file] = process.argv[2..]
throw "usage: testml-compiler <input-file>" \
  unless input_file?
throw "Input file does not exist: '#{input_file}'" \
  unless input_file == '-' or file_exists input_file

compiler = new TestML.Compiler

out compiler.compile input_file

# vim: sw=2 lisp:
